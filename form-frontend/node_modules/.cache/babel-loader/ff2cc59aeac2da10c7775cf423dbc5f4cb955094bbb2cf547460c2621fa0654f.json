{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import'../styles/PurchaseRequest.css';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PurchaseRequestForm=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const{search}=useLocation();const queryParams=new URLSearchParams(search);const formId=queryParams.get('id');const user=JSON.parse(localStorage.getItem('user'));const formDataFromState=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.formData;const[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',department:'',date:new Date().toISOString().split('T')[0],status:'Draft',items:[{description:'',unit:'',quantity:'',cost:'',amount:''}],remarks:'',vendorName:'',vendorAddress1:'',vendorAddress2:'',vendorZip:'',CountryZip:'',currency:'THB',terms:'7 Days',attn:'',supervisorEmail:'',deliveryDate:'',reasonType:'',reasonComments:'',depManagerComment:'',gmComment:'',signRequester:'',dateRequester:'',signDepartmentManager:'',dateDepartmentManager:'',signGeneralManager:'',dateGeneralManager:''});const[insertedId,setInsertedId]=useState(null);const[isSendingEmail,setIsSendingEmail]=useState(false);const departments=['Group Management','Customer Service','Finance and Accounting','Sales and Marketing','Information Communication and Technology','Human Resources','Occupational Health and Safety','Operation and Production','Production Planning and Control','Purchasing','Maintenance and Engineering','Quality Control','Warehouse and Distribution','Product Innovation','New Products Development','Regulatory and Technical Information'];const currencies=['AUD','JPY','EUR','THB','USD','PHP'];const termsList=['7 Days','15 Days','30 Days','45 Days','60 Days','CASH','Bank Transfer','TT Advance'];const fetchFormData=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/forms/${formId}`,{headers:{'Authorization':`Bearer ${token}`}});const{details,user_name,department}=response.data;let parsedDetails={};if(typeof details==='string'){parsedDetails=JSON.parse(details);}else{parsedDetails=details;}const newFormData={name:parsedDetails.name||user_name||(user===null||user===void 0?void 0:user.name)||'',department:parsedDetails.department||department||'',date:new Date().toISOString().split('T')[0],status:'Draft',items:parsedDetails.items||[{description:'',unit:'',quantity:'',cost:'',amount:''}],remarks:parsedDetails.remarks||'',vendorName:parsedDetails.vendorName||'',vendorAddress1:parsedDetails.vendorAddress1||'',vendorAddress2:parsedDetails.vendorAddress2||'',vendorZip:parsedDetails.vendorZip||'',CountryZip:parsedDetails.CountryZip||'',currency:parsedDetails.currency||'THB',terms:parsedDetails.terms||'7 Days',attn:parsedDetails.attn||'',supervisorEmail:parsedDetails.supervisorEmail||'',deliveryDate:parsedDetails.deliveryDate||'',reasonType:parsedDetails.reasonType||'',reasonComments:parsedDetails.reasonComments||'',depManagerComment:parsedDetails.depManagerComment||'',gmComment:parsedDetails.gmComment||'',signRequester:parsedDetails.signRequester||'',dateRequester:parsedDetails.dateRequester||'',signDepartmentManager:parsedDetails.signDepartmentManager||'',dateDepartmentManager:parsedDetails.dateDepartmentManager||'',signGeneralManager:parsedDetails.signGeneralManager||'',dateGeneralManager:parsedDetails.dateGeneralManager||''};setFormData(newFormData);}catch(error){console.error('Error fetching form:',error);alert('เกิดข้อผิดพลาดในการดึงข้อมูลฟอร์ม');}},[formId,user===null||user===void 0?void 0:user.name]);useEffect(()=>{if(formId){if(formDataFromState){try{const details=typeof formDataFromState.details==='string'?JSON.parse(formDataFromState.details):formDataFromState.details;setFormData(prev=>({...prev,...details,name:formDataFromState.user_name||(user===null||user===void 0?void 0:user.name)||'',department:details.department||formDataFromState.department||''}));}catch(error){console.error('Error parsing form data:',error);fetchFormData();}}else{fetchFormData();}}},[formId,formDataFromState,fetchFormData,user===null||user===void 0?void 0:user.name]);// handleCellChange => ดัก onChange จาก <input> ในตาราง\nconst handleCellChange=(e,rowIndex,field)=>{const newItems=[...formData.items];const value=e.target.value;newItems[rowIndex][field]=value;// คำนวณ Amount จาก quantity และ cost\nif(['quantity','cost'].includes(field)){const qty=parseFloat(newItems[rowIndex].quantity)||0;const cst=parseFloat(newItems[rowIndex].cost)||0;newItems[rowIndex].amount=(qty*cst).toFixed(2);}setFormData({...formData,items:newItems});};// คำนวณ Subtotal, VAT, Grand Total\nconst subTotalNum=formData.items.reduce((acc,item)=>{const amt=parseFloat(item.amount)||0;return acc+amt;},0);// เช็คสกุลเงิน ถ้าไม่ใช่ THB ให้ใช้ VAT 0%\nconst isTHB=formData.currency==='THB';const vatRate=isTHB?0.07:0;const vatLabel=isTHB?'VAT (7%)':'VAT (0%)';const vatNum=subTotalNum*vatRate;const grandTotalNum=subTotalNum+vatNum;const subTotalStr=subTotalNum.toLocaleString('en-US',{minimumFractionDigits:2});const vatStr=vatNum.toLocaleString('en-US',{minimumFractionDigits:2});const grandTotalStr=grandTotalNum.toLocaleString('en-US',{minimumFractionDigits:2});// เพิ่ม/ลบ rows\nconst addItem=()=>{setFormData(prev=>({...prev,items:[...prev.items,{description:'',unit:'',quantity:'',cost:'',amount:''}]}));};const handleDeleteItem=rowIndex=>{setFormData(prev=>{const newItems=[...prev.items];newItems.splice(rowIndex,1);return{...prev,items:newItems};});};// Handle change นอกตาราง\nconst handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};// แยกฟังก์ชันสำหรับ save draft\nconst handleSaveDraft=async()=>{try{const token=localStorage.getItem('token');const baseUrl=process.env.REACT_APP_API_URL||'http://192.168.17.15:5000';const url=formId?`${baseUrl}/api/forms/${formId}`:`${baseUrl}/api/forms`;const method=formId?'put':'post';const response=await axios[method](url,{form_name:\"Purchase Request\",user_name:formData.name,department:formData.department,status:'Draft',details:JSON.stringify({...formData,subTotal:subTotalNum,vat:vatNum,grandTotal:grandTotalNum})},{headers:{'Authorization':`Bearer ${token}`}});alert('✅ Draft saved successfully!');// ถ้าเป็นการสร้างใหม่จะได้ insertedId จาก response\nconst newFormId=response.data.insertedId||formId;setInsertedId(newFormId);// Redirect กลับไปหน้า my-forms\nnavigate('/my-forms');}catch(error){console.error('❌ Error:',error);alert('❌ Error saving draft');}};// แก้ไข handleSubmit\nconst handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');const url=formId?`${process.env.REACT_APP_API_URL}/api/forms/${formId}`:`${process.env.REACT_APP_API_URL}/api/forms`;const method=formId?'put':'post';const response=await axios[method](url,{form_name:\"Purchase Request\",user_name:formData.name,department:formData.department,status:'Waiting For Approve',details:JSON.stringify({...formData,subTotal:subTotalNum,vat:vatNum,grandTotal:grandTotalNum})},{headers:{'Authorization':`Bearer ${token}`}});alert('✅ Form submitted successfully!');const newFormId=response.data.insertedId||formId;setInsertedId(newFormId);// Redirect กลับไปหน้า my-forms\nnavigate('/my-forms');}catch(error){console.error('❌ Error:',error);alert('❌ Error submitting form');}};// ปุ่ม Send Email (จะแยกออกจาก submit)\nconst handleSendEmail=async()=>{if(!formData.supervisorEmail){alert('กรุณากรอก Manager Email ก่อนส่งอีเมล์');return;}if(!insertedId){alert('ยังไม่มีการบันทึกฟอร์ม จึงไม่สามารถส่งอีเมล์ได้');return;}try{setIsSendingEmail(true);await axios.post(`${process.env.REACT_APP_API_URL}/api/forms/pdf-email`,{id:insertedId,email:formData.supervisorEmail});alert('✅ Email sent successfully!');}catch(error){console.error('❌ Error sending email:',error);alert('❌ Error sending email');}finally{setIsSendingEmail(false);}};// Print\nconst handlePrint=()=>{window.print();};return/*#__PURE__*/_jsx(\"div\",{className:\"print-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img2.pic.in.th/pic/logo14821dedd19c2ad18.png\",alt:\"Company Logo\",className:\"company-logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Newly Weds Foods (Thailand) Limited\"}),/*#__PURE__*/_jsx(\"p\",{children:\"General Purchase Requisition\"}),/*#__PURE__*/_jsx(\"p\",{children:\"FORM # PC-FM-013\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"purchaseRequestForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,readOnly:true,style:{backgroundColor:'#f0f0f0'}}),/*#__PURE__*/_jsx(\"label\",{children:\"Department:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"department\",value:formData.department,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Department\"}),departments.map(dep=>/*#__PURE__*/_jsx(\"option\",{value:dep,children:dep},dep))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"supervisorEmail\",value:formData.supervisorEmail,onChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"pr-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ITEM\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"UOM\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:formData.items.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"item-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:row.description,onChange:e=>handleCellChange(e,index,'description')})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:row.unit,onChange:e=>handleCellChange(e,index,'unit')})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:row.quantity,onChange:e=>handleCellChange(e,index,'quantity')})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:row.cost,onChange:e=>handleCellChange(e,index,'cost')})}),/*#__PURE__*/_jsxs(\"td\",{className:\"amount-cell\",children:[parseFloat(row.amount||0).toLocaleString('en-US',{minimumFractionDigits:2}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"delete-btn outside\",onClick:()=>handleDeleteItem(index),children:\"\\u274C\"})]})]},index))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button\",onClick:addItem,children:\"\\u2795 Add Item\"}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"remarks-box\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Remarks / \\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38 : \"}),/*#__PURE__*/_jsxs(\"span\",{className:\"asset-condition\",children:[\"\\u0E42\\u0E1B\\u0E23\\u0E14\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E02\\u0E2D\\u0E07\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E27\\u0E48\\u0E32\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E2A\\u0E34\\u0E19\\u0E17\\u0E23\\u0E31\\u0E1E\\u0E22\\u0E4C\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E0B\\u0E48\\u0E2D\\u0E21\\u0E41\\u0E0B\\u0E21 / Please specify type of goods as asset or repair-maintenance.\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"span\",{className:\"asset-condition\",children:\"\\u0E2A\\u0E34\\u0E19\\u0E17\\u0E23\\u0E31\\u0E1E\\u0E22\\u0E4C = \\u0E2D\\u0E32\\u0E22\\u0E38\\u0E43\\u0E0A\\u0E49\\u0E07\\u0E32\\u0E19 \\u2265 1 \\u0E1B\\u0E35 \\u0E41\\u0E25\\u0E30\\u0E21\\u0E39\\u0E25\\u0E04\\u0E48\\u0E32 \\u2265 1,000.- \\u0E1A\\u0E32\\u0E17 / Asset = Useful life \\u2265 1 year, value \\u2265 1,000.- Baht\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Vendor Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Vendor Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vendorName\",value:formData.vendorName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address1:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vendorAddress1\",value:formData.vendorAddress1,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address2:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vendorAddress2\",value:formData.vendorAddress2,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Zip Code:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vendorZip\",value:formData.vendorZip,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Country:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"CountryZip\",value:formData.CountryZip,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-col summary-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-row no-wrap\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency:\"}),/*#__PURE__*/_jsx(\"select\",{name:\"currency\",value:formData.currency,onChange:handleChange,children:currencies.map(curr=>/*#__PURE__*/_jsx(\"option\",{value:curr,children:curr},curr))}),/*#__PURE__*/_jsx(\"label\",{children:\"Terms:\"}),/*#__PURE__*/_jsx(\"select\",{name:\"terms\",value:formData.terms,onChange:handleChange,children:termsList.map(term=>/*#__PURE__*/_jsx(\"option\",{value:term,children:term},term))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary compact-summary\",children:[/*#__PURE__*/_jsxs(\"p\",{style:{margin:'3px 0'},children:[\"Sub Total: \",subTotalStr,\" \",formData.currency]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'3px 0'},children:[vatLabel,\": \",vatStr,\" \",formData.currency]}),/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'5px 0'},children:[\"Grand Total: \",grandTotalStr,\" \",formData.currency]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reason-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Reason of Request / \\u0E40\\u0E2B\\u0E15\\u0E38\\u0E1C\\u0E25\\u0E01\\u0E32\\u0E23\\u0E02\\u0E2D\\u0E23\\u0E32\\u0E04\\u0E32 - \\u0E02\\u0E2D\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-row-reason\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"reasonType\",value:formData.reasonType,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19 (Stationery)\",children:\"\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19 (Stationery)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38\\u0E2A\\u0E34\\u0E49\\u0E19\\u0E40\\u0E1B\\u0E25\\u0E37\\u0E2D\\u0E07 (Consume)\",children:\"\\u0E27\\u0E31\\u0E2A\\u0E14\\u0E38\\u0E2A\\u0E34\\u0E49\\u0E19\\u0E40\\u0E1B\\u0E25\\u0E37\\u0E2D\\u0E07 (Consume)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E2A\\u0E34\\u0E19\\u0E17\\u0E23\\u0E31\\u0E1E\\u0E22\\u0E4C (Asset)\",children:\"\\u0E2A\\u0E34\\u0E19\\u0E17\\u0E23\\u0E31\\u0E1E\\u0E22\\u0E4C (Asset)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E2A\\u0E32\\u0E23\\u0E40\\u0E04\\u0E21\\u0E35 (Chemical)\",children:\"\\u0E2A\\u0E32\\u0E23\\u0E40\\u0E04\\u0E21\\u0E35 (Chemical)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E17\\u0E14\\u0E2A\\u0E2D\\u0E1A (Testing)\",children:\"\\u0E17\\u0E14\\u0E2A\\u0E2D\\u0E1A (Testing)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E2A\\u0E2D\\u0E1A\\u0E40\\u0E17\\u0E35\\u0E22\\u0E1A/\\u0E1B\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E31\\u0E19 (Calibrate/Preventive)\",children:\"\\u0E2A\\u0E2D\\u0E1A\\u0E40\\u0E17\\u0E35\\u0E22\\u0E1A/\\u0E1B\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E31\\u0E19 (Calibrate/Preventive)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E0B\\u0E48\\u0E2D\\u0E21\\u0E41\\u0E0B\\u0E21 (Repair)\",children:\"\\u0E0B\\u0E48\\u0E2D\\u0E21\\u0E41\\u0E0B\\u0E21 (Repair)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E2D\\u0E30\\u0E44\\u0E2B\\u0E25\\u0E48 (Spare Parts)\",children:\"\\u0E2D\\u0E30\\u0E44\\u0E2B\\u0E25\\u0E48 (Spare Parts)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E2D\\u0E37\\u0E48\\u0E19\\u0E46 (Other)\",children:\"\\u0E2D\\u0E37\\u0E48\\u0E19\\u0E46 (Other)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E04\\u0E48\\u0E32\\u0E40\\u0E0A\\u0E48\\u0E32/(Rental)\",children:\"\\u0E04\\u0E48\\u0E32\\u0E40\\u0E0A\\u0E48\\u0E32 (Rental)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E17\\u0E33\\u0E04\\u0E27\\u0E32\\u0E21\\u0E2A\\u0E30\\u0E2D\\u0E32\\u0E14 (Cleaning)\",children:\"\\u0E17\\u0E33\\u0E04\\u0E27\\u0E32\\u0E21\\u0E2A\\u0E30\\u0E2D\\u0E32\\u0E14 (Cleaning)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0E1A\\u0E23\\u0E23\\u0E08\\u0E38\\u0E20\\u0E31\\u0E13\\u0E11\\u0E4C\\u0E2D\\u0E37\\u0E48\\u0E19\\u0E46 (Non-FG Packaging)\",children:\"\\u0E1A\\u0E23\\u0E23\\u0E08\\u0E38\\u0E20\\u0E31\\u0E13\\u0E11\\u0E4C\\u0E2D\\u0E37\\u0E48\\u0E19\\u0E46 (Non-FG Packaging)\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Delivery Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"deliveryDate\",value:formData.deliveryDate,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-row-reason\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Comments:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reasonComments\",rows:\"3\",value:formData.reasonComments,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comment by Department Manager\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"depManagerComment\",rows:\"4\",value:formData.depManagerComment,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comment by General Manager\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"gmComment\",rows:\"4\",value:formData.gmComment,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"sign-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Requester\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Department Manager\"}),/*#__PURE__*/_jsx(\"th\",{children:\"General Manager\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sign:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"signRequester\",value:formData.signRequester,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateRequester\",value:formData.dateRequester,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sign:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"signDepartmentManager\",value:formData.signDepartmentManager,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateDepartmentManager\",value:formData.dateDepartmentManager,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sign:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"signGeneralManager\",value:formData.signGeneralManager,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dateGeneralManager\",value:formData.dateGeneralManager,onChange:handleChange})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-row\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button draft-btn\",onClick:handleSaveDraft,children:\"\\uD83D\\uDCBE Save as Draft\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button submit-btn\",children:\"\\uD83D\\uDCE9 Submit Form\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"button\",onClick:handleSendEmail,disabled:!formData.supervisorEmail||!insertedId||isSendingEmail,children:[\"\\u2709\\uFE0F \",isSendingEmail?'Sending...':'Send Email']}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button print-btn\",onClick:handlePrint,children:\"\\uD83D\\uDDA8 Print\"})]})]})]})});};export default PurchaseRequestForm;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","PurchaseRequestForm","_location$state","navigate","location","search","queryParams","URLSearchParams","formId","get","user","JSON","parse","localStorage","getItem","formDataFromState","state","formData","setFormData","name","department","date","Date","toISOString","split","status","items","description","unit","quantity","cost","amount","remarks","vendorName","vendorAddress1","vendorAddress2","vendorZip","CountryZip","currency","terms","attn","supervisorEmail","deliveryDate","reasonType","reasonComments","depManagerComment","gmComment","signRequester","dateRequester","signDepartmentManager","dateDepartmentManager","signGeneralManager","dateGeneralManager","insertedId","setInsertedId","isSendingEmail","setIsSendingEmail","departments","currencies","termsList","fetchFormData","token","response","process","env","REACT_APP_API_URL","headers","details","user_name","data","parsedDetails","newFormData","error","console","alert","prev","handleCellChange","e","rowIndex","field","newItems","value","target","includes","qty","parseFloat","cst","toFixed","subTotalNum","reduce","acc","item","amt","isTHB","vatRate","vatLabel","vatNum","grandTotalNum","subTotalStr","toLocaleString","minimumFractionDigits","vatStr","grandTotalStr","addItem","handleDeleteItem","splice","handleChange","handleSaveDraft","baseUrl","url","method","form_name","stringify","subTotal","vat","grandTotal","newFormId","handleSubmit","preventDefault","handleSendEmail","post","id","email","handlePrint","window","print","className","children","src","alt","onSubmit","type","readOnly","style","backgroundColor","onChange","required","map","dep","row","index","onClick","curr","term","margin","rows","disabled"],"sources":["C:/MyProjects/Orgforms/form-frontend/src/pages/PurchaseRequestForm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/PurchaseRequest.css';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nconst PurchaseRequestForm = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { search } = useLocation();\r\n  const queryParams = new URLSearchParams(search);\r\n  const formId = queryParams.get('id');\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const formDataFromState = location.state?.formData;\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: user?.name || '',\r\n    department: '',\r\n    date: new Date().toISOString().split('T')[0],\r\n    status: 'Draft',\r\n    items: [\r\n      { description: '', unit: '', quantity: '', cost: '', amount: '' }\r\n    ],\r\n    remarks: '',\r\n    vendorName: '',\r\n    vendorAddress1: '',\r\n    vendorAddress2: '',\r\n    vendorZip: '',\r\n    CountryZip: '',\r\n    currency: 'THB',\r\n    terms: '7 Days',\r\n    attn: '',\r\n    supervisorEmail: '',\r\n    deliveryDate: '',\r\n    reasonType: '',\r\n    reasonComments: '',\r\n    depManagerComment: '',\r\n    gmComment: '',\r\n    signRequester: '',\r\n    dateRequester: '',\r\n    signDepartmentManager: '',\r\n    dateDepartmentManager: '',\r\n    signGeneralManager: '',\r\n    dateGeneralManager: ''\r\n  });\r\n\r\n  const [insertedId, setInsertedId] = useState(null);\r\n  const [isSendingEmail, setIsSendingEmail] = useState(false);\r\n\r\n  const departments = [\r\n    'Group Management', 'Customer Service', 'Finance and Accounting',\r\n    'Sales and Marketing',\r\n    'Information Communication and Technology', 'Human Resources',\r\n    'Occupational Health and Safety', 'Operation and Production',\r\n    'Production Planning and Control', 'Purchasing', 'Maintenance and Engineering',\r\n    'Quality Control', 'Warehouse and Distribution','Product Innovation'\r\n    ,'New Products Development'\r\n    ,'Regulatory and Technical Information'\r\n  ];\r\n\r\n  const currencies = ['AUD', 'JPY', 'EUR', 'THB', 'USD', 'PHP'];\r\n  const termsList = ['7 Days', '15 Days', '30 Days', '45 Days', '60 Days', 'CASH', 'Bank Transfer', 'TT Advance'];\r\n\r\n  const fetchFormData = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/forms/${formId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const { details, user_name, department } = response.data;\r\n      let parsedDetails = {};\r\n      \r\n      if (typeof details === 'string') {\r\n        parsedDetails = JSON.parse(details);\r\n      } else {\r\n        parsedDetails = details;\r\n      }\r\n\r\n      const newFormData = {\r\n        name: parsedDetails.name || user_name || user?.name || '',\r\n        department: parsedDetails.department || department || '',\r\n        date: new Date().toISOString().split('T')[0],\r\n        status: 'Draft',\r\n        items: parsedDetails.items || [{ description: '', unit: '', quantity: '', cost: '', amount: '' }],\r\n        remarks: parsedDetails.remarks || '',\r\n        vendorName: parsedDetails.vendorName || '',\r\n        vendorAddress1: parsedDetails.vendorAddress1 || '',\r\n        vendorAddress2: parsedDetails.vendorAddress2 || '',\r\n        vendorZip: parsedDetails.vendorZip || '',\r\n        CountryZip: parsedDetails.CountryZip || '',\r\n        currency: parsedDetails.currency || 'THB',\r\n        terms: parsedDetails.terms || '7 Days',\r\n        attn: parsedDetails.attn || '',\r\n        supervisorEmail: parsedDetails.supervisorEmail || '',\r\n        deliveryDate: parsedDetails.deliveryDate || '',\r\n        reasonType: parsedDetails.reasonType || '',\r\n        reasonComments: parsedDetails.reasonComments || '',\r\n        depManagerComment: parsedDetails.depManagerComment || '',\r\n        gmComment: parsedDetails.gmComment || '',\r\n        signRequester: parsedDetails.signRequester || '',\r\n        dateRequester: parsedDetails.dateRequester || '',\r\n        signDepartmentManager: parsedDetails.signDepartmentManager || '',\r\n        dateDepartmentManager: parsedDetails.dateDepartmentManager || '',\r\n        signGeneralManager: parsedDetails.signGeneralManager || '',\r\n        dateGeneralManager: parsedDetails.dateGeneralManager || ''\r\n      };\r\n\r\n      setFormData(newFormData);\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching form:', error);\r\n      alert('เกิดข้อผิดพลาดในการดึงข้อมูลฟอร์ม');\r\n    }\r\n  }, [formId, user?.name]);\r\n\r\n  useEffect(() => {\r\n    if (formId) {\r\n      if (formDataFromState) {\r\n        try {\r\n          const details = typeof formDataFromState.details === 'string' \r\n            ? JSON.parse(formDataFromState.details)\r\n            : formDataFromState.details;\r\n          \r\n          setFormData(prev => ({\r\n            ...prev,\r\n            ...details,\r\n            name: formDataFromState.user_name || user?.name || '',\r\n            department: details.department || formDataFromState.department || ''\r\n          }));\r\n        } catch (error) {\r\n          console.error('Error parsing form data:', error);\r\n          fetchFormData();\r\n        }\r\n      } else {\r\n        fetchFormData();\r\n      }\r\n    }\r\n  }, [formId, formDataFromState, fetchFormData, user?.name]);\r\n\r\n  // handleCellChange => ดัก onChange จาก <input> ในตาราง\r\n  const handleCellChange = (e, rowIndex, field) => {\r\n    const newItems = [...formData.items];\r\n    const value = e.target.value;\r\n    newItems[rowIndex][field] = value;\r\n\r\n    // คำนวณ Amount จาก quantity และ cost\r\n    if (['quantity', 'cost'].includes(field)) {\r\n      const qty = parseFloat(newItems[rowIndex].quantity) || 0;\r\n      const cst = parseFloat(newItems[rowIndex].cost) || 0;\r\n      newItems[rowIndex].amount = (qty * cst).toFixed(2); \r\n    }\r\n\r\n    setFormData({ ...formData, items: newItems });\r\n  };\r\n\r\n  // คำนวณ Subtotal, VAT, Grand Total\r\n  const subTotalNum = formData.items.reduce((acc, item) => {\r\n    const amt = parseFloat(item.amount) || 0;\r\n    return acc + amt;\r\n  }, 0);\r\n  \r\n  // เช็คสกุลเงิน ถ้าไม่ใช่ THB ให้ใช้ VAT 0%\r\n  const isTHB = formData.currency === 'THB';\r\n  const vatRate = isTHB ? 0.07 : 0;\r\n  const vatLabel = isTHB ? 'VAT (7%)' : 'VAT (0%)';\r\n  const vatNum = subTotalNum * vatRate;\r\n  const grandTotalNum = subTotalNum + vatNum;\r\n\r\n  const subTotalStr = subTotalNum.toLocaleString('en-US', { minimumFractionDigits: 2 });\r\n  const vatStr = vatNum.toLocaleString('en-US', { minimumFractionDigits: 2 });\r\n  const grandTotalStr = grandTotalNum.toLocaleString('en-US', { minimumFractionDigits: 2 });\r\n\r\n\r\n  // เพิ่ม/ลบ rows\r\n  const addItem = () => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      items: [...prev.items, { description: '', unit: '', quantity: '', cost: '', amount: '' }]\r\n    }));\r\n  };\r\n\r\n  const handleDeleteItem = (rowIndex) => {\r\n    setFormData(prev => {\r\n      const newItems = [...prev.items];\r\n      newItems.splice(rowIndex, 1);\r\n      return { ...prev, items: newItems };\r\n    });\r\n  };\r\n\r\n  // Handle change นอกตาราง\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // แยกฟังก์ชันสำหรับ save draft\r\n  const handleSaveDraft = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const baseUrl = process.env.REACT_APP_API_URL || 'http://192.168.17.15:5000';\r\n      const url = formId \r\n        ? `${baseUrl}/api/forms/${formId}`\r\n        : `${baseUrl}/api/forms`;\r\n      \r\n      const method = formId ? 'put' : 'post';\r\n      \r\n      const response = await axios[method](url, {\r\n        form_name: \"Purchase Request\",\r\n        user_name: formData.name,\r\n        department: formData.department,\r\n        status: 'Draft',\r\n        details: JSON.stringify({\r\n          ...formData,\r\n          subTotal: subTotalNum,\r\n          vat: vatNum,\r\n          grandTotal: grandTotalNum\r\n        })\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      alert('✅ Draft saved successfully!');\r\n      \r\n      // ถ้าเป็นการสร้างใหม่จะได้ insertedId จาก response\r\n      const newFormId = response.data.insertedId || formId;\r\n      setInsertedId(newFormId);\r\n      \r\n      // Redirect กลับไปหน้า my-forms\r\n      navigate('/my-forms');\r\n    } catch (error) {\r\n      console.error('❌ Error:', error);\r\n      alert('❌ Error saving draft');\r\n    }\r\n  };\r\n\r\n  // แก้ไข handleSubmit\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const url = formId \r\n        ? `${process.env.REACT_APP_API_URL}/api/forms/${formId}`\r\n        : `${process.env.REACT_APP_API_URL}/api/forms`;\r\n      \r\n      const method = formId ? 'put' : 'post';\r\n      \r\n      const response = await axios[method](url, {\r\n        form_name: \"Purchase Request\",\r\n        user_name: formData.name,\r\n        department: formData.department,\r\n        status: 'Waiting For Approve',\r\n        details: JSON.stringify({\r\n          ...formData,\r\n          subTotal: subTotalNum,\r\n          vat: vatNum,\r\n          grandTotal: grandTotalNum\r\n        })\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      alert('✅ Form submitted successfully!');\r\n      \r\n      const newFormId = response.data.insertedId || formId;\r\n      setInsertedId(newFormId);\r\n      \r\n      // Redirect กลับไปหน้า my-forms\r\n      navigate('/my-forms');\r\n    } catch (error) {\r\n      console.error('❌ Error:', error);\r\n      alert('❌ Error submitting form');\r\n    }\r\n  };\r\n\r\n  // ปุ่ม Send Email (จะแยกออกจาก submit)\r\n  const handleSendEmail = async () => {\r\n    if (!formData.supervisorEmail) {\r\n      alert('กรุณากรอก Manager Email ก่อนส่งอีเมล์');\r\n      return;\r\n    }\r\n    if (!insertedId) {\r\n      alert('ยังไม่มีการบันทึกฟอร์ม จึงไม่สามารถส่งอีเมล์ได้');\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      setIsSendingEmail(true);\r\n      await axios.post(`${process.env.REACT_APP_API_URL}/api/forms/pdf-email`, {\r\n        id: insertedId,\r\n        email: formData.supervisorEmail\r\n      });\r\n      alert('✅ Email sent successfully!');\r\n    } catch (error) {\r\n      console.error('❌ Error sending email:', error);\r\n      alert('❌ Error sending email');\r\n    } finally {\r\n      setIsSendingEmail(false);\r\n    }\r\n  };\r\n  \r\n  // Print\r\n  const handlePrint = () => {\r\n    window.print();\r\n  };\r\n    \r\n  return (\r\n    <div className=\"print-page\">\r\n      <div className=\"form-container\">\r\n        <div className=\"form-header\">\r\n          <img\r\n            src=\"https://img2.pic.in.th/pic/logo14821dedd19c2ad18.png\"\r\n            alt=\"Company Logo\"\r\n            className=\"company-logo\"\r\n          />\r\n          <h1>Newly Weds Foods (Thailand) Limited</h1>\r\n          <p>General Purchase Requisition</p>\r\n          \r\n          <p>FORM # PC-FM-013</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} id=\"purchaseRequestForm\">\r\n          {/* Row 1: Name, Dept, Date */}\r\n          <div className=\"input-row\">\r\n            <label>Name:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name}\r\n              readOnly\r\n              style={{ backgroundColor: '#f0f0f0' }}\r\n            />\r\n\r\n            <label>Department:</label>\r\n            <select\r\n              name=\"department\"\r\n              value={formData.department}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Select Department</option>\r\n              {departments.map(dep => (\r\n                <option key={dep} value={dep}>{dep}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Row 2: Manager Email, Delivery Date */}\r\n          <div className=\"input-row\">\r\n            <label>Email:</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"supervisorEmail\"\r\n              value={formData.supervisorEmail}\r\n              onChange={handleChange}\r\n            />\r\n\r\n            <div className=\"date-group\">\r\n              <label>Date:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                value={formData.date}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/* ตาราง Items (6 คอลัมน์) */}\r\n          <table className=\"pr-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>ITEM</th>\r\n                <th>Description</th>\r\n                <th>UOM</th>\r\n                <th>Quantity</th>\r\n                <th>Cost</th>\r\n                <th>Amount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {formData.items.map((row, index) => (\r\n                <tr key={index} className=\"item-row\">\r\n                  <td>{index + 1}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={row.description}\r\n                      onChange={(e) => handleCellChange(e, index, 'description')}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={row.unit}\r\n                      onChange={(e) => handleCellChange(e, index, 'unit')}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={row.quantity}\r\n                      onChange={(e) => handleCellChange(e, index, 'quantity')}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={row.cost}\r\n                      onChange={(e) => handleCellChange(e, index, 'cost')}\r\n                    />\r\n                  </td>\r\n                  <td className=\"amount-cell\">\r\n                    {parseFloat(row.amount || 0).toLocaleString('en-US', { minimumFractionDigits: 2 })}\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"delete-btn outside\"\r\n                      onClick={() => handleDeleteItem(index)}\r\n                    >\r\n                      ❌\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <button\r\n            type=\"button\"\r\n            className=\"button\"\r\n            onClick={addItem}\r\n          >\r\n            ➕ Add Item\r\n          </button>\r\n\r\n          <p></p>\r\n          \r\n          {/* Remarks */}\r\n          <div className=\"remarks-box\">\r\n            <h4>Remarks / หมายเหตุ : </h4>\r\n          <span className=\"asset-condition\">\r\n          โปรดระบุประเภทของสินค้าที่ต้องการว่าเป็นสินทรัพย์หรือเพื่อซ่อมแซม /\r\n   Please specify type of goods as asset or repair-maintenance.<br />\r\n  </span>\r\n  <span className=\"asset-condition\">\r\n    สินทรัพย์ = อายุใช้งาน ≥ 1 ปี และมูลค่า ≥ 1,000.- บาท /\r\n    Asset = Useful life ≥ 1 year, value ≥ 1,000.- Baht\r\n  </span>\r\n</div>\r\n          {/* main-row => Vendor Info / Currency, Terms, Subtotal */}\r\n          <div className=\"main-row\">\r\n          <div className=\"vendor-section\">\r\n  <h3>Vendor Info</h3>\r\n  \r\n  {/* Row 1: Vendor Name */}\r\n  <div className=\"vendor-row\">\r\n    <label>Vendor Name:</label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"vendorName\"\r\n      value={formData.vendorName}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n\r\n\r\n\r\n  {/* Address1 */}\r\n  <div className=\"vendor-row\">\r\n    <label>Address1:</label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"vendorAddress1\"\r\n      value={formData.vendorAddress1}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n  {/* Address2 */}\r\n  <div className=\"vendor-row\">\r\n    <label>Address2:</label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"vendorAddress2\"\r\n      value={formData.vendorAddress2}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n  {/* Zip */}\r\n  <div className=\"vendor-row\">\r\n    <label>Zip Code:</label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"vendorZip\"\r\n      value={formData.vendorZip}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n  {/* Country */}\r\n  <div className=\"vendor-row\">\r\n    <label>Country:</label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"CountryZip\"\r\n      value={formData.CountryZip}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n</div>\r\n            \r\n<div className=\"right-col summary-section\">\r\n  {/* Currency */}\r\n  <div className=\"input-row no-wrap\">\r\n    <label>Currency:</label>\r\n    <select\r\n      name=\"currency\"\r\n      value={formData.currency}\r\n      onChange={handleChange}\r\n    >\r\n      {currencies.map(curr => (\r\n        <option key={curr} value={curr}>{curr}</option>\r\n      ))}\r\n    </select>\r\n\r\n    <label>Terms:</label>\r\n    <select\r\n      name=\"terms\"\r\n      value={formData.terms}\r\n      onChange={handleChange}\r\n    >\r\n      {termsList.map(term => (\r\n        <option key={term} value={term}>{term}</option>\r\n      ))}\r\n    </select>\r\n  </div>\r\n\r\n      \r\n\r\n\r\n              <div className=\"summary compact-summary\">\r\n                <p style={{ margin: '3px 0' }}>\r\n                  Sub Total: {subTotalStr} {formData.currency}\r\n                </p>\r\n                <p style={{ margin: '3px 0' }}>\r\n                  {vatLabel}: {vatStr} {formData.currency}\r\n                </p>\r\n                <h3 style={{ margin: '5px 0' }}>\r\n                  Grand Total: {grandTotalStr} {formData.currency}\r\n                </h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n        {/* Reason of Request Section */}\r\n          <div className=\"reason-section\">\r\n            <h3>Reason of Request / เหตุผลการขอราคา - ขอสั่งซื้อ</h3>\r\n\r\n            <div className=\"input-row-reason\">\r\n              <label>Type:</label>\r\n              <select\r\n                name=\"reasonType\"\r\n                value={formData.reasonType}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n              <option value=\"\">Select</option>\r\n              <option value=\"เครื่องเขียน (Stationery)\">เครื่องเขียน (Stationery)</option>\r\n              <option value=\"วัสดุสิ้นเปลือง (Consume)\">วัสดุสิ้นเปลือง (Consume)</option>\r\n              <option value=\"สินทรัพย์ (Asset)\">สินทรัพย์ (Asset)</option>\r\n              <option value=\"สารเคมี (Chemical)\">สารเคมี (Chemical)</option>\r\n              <option value=\"ทดสอบ (Testing)\">ทดสอบ (Testing)</option>\r\n              <option value=\"สอบเทียบ/ป้องกัน (Calibrate/Preventive)\">สอบเทียบ/ป้องกัน (Calibrate/Preventive)</option>\r\n              <option value=\"ซ่อมแซม (Repair)\">ซ่อมแซม (Repair)</option>\r\n              <option value=\"อะไหล่ (Spare Parts)\">อะไหล่ (Spare Parts)</option>\r\n              <option value=\"อื่นๆ (Other)\">อื่นๆ (Other)</option>\r\n              <option value=\"ค่าเช่า/(Rental)\">ค่าเช่า (Rental)</option>\r\n              <option value=\"ทำความสะอาด (Cleaning)\">ทำความสะอาด (Cleaning)</option>\r\n              <option value=\"บรรจุภัณฑ์อื่นๆ (Non-FG Packaging)\">บรรจุภัณฑ์อื่นๆ (Non-FG Packaging)</option>\r\n              </select>\r\n              <label>Delivery Date:</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"deliveryDate\"\r\n                value={formData.deliveryDate}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n           \r\n\r\n            <div className=\"input-row-reason\">\r\n              <label>Comments:</label>\r\n              <textarea\r\n                name=\"reasonComments\"\r\n                rows=\"3\"\r\n                value={formData.reasonComments}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"comment-row\">\r\n            <div className=\"comment-box\">\r\n              <h3>Comment by Department Manager</h3>\r\n              <textarea\r\n                name=\"depManagerComment\"\r\n                rows=\"4\"\r\n                value={formData.depManagerComment}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <div className=\"comment-box\">\r\n              <h3>Comment by General Manager</h3>\r\n              <textarea\r\n                name=\"gmComment\"\r\n                rows=\"4\"\r\n                value={formData.gmComment}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <table className=\"sign-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Requester</th>\r\n                <th>Department Manager</th>\r\n                <th>General Manager</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <div className=\"sign-row\">\r\n                    <label>Sign:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"signRequester\"\r\n                      value={formData.signRequester}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                  <div className=\"sign-row\">\r\n                    <label>Date:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"dateRequester\"\r\n                      value={formData.dateRequester}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"sign-row\">\r\n                    <label>Sign:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"signDepartmentManager\"\r\n                      value={formData.signDepartmentManager}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                  <div className=\"sign-row\">\r\n                    <label>Date:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"dateDepartmentManager\"\r\n                      value={formData.dateDepartmentManager}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"sign-row\">\r\n                    <label>Sign:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"signGeneralManager\"\r\n                      value={formData.signGeneralManager}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                  <div className=\"sign-row\">\r\n                    <label>Date:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"dateGeneralManager\"\r\n                      value={formData.dateGeneralManager}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className=\"btn-row\">\r\n            <button type=\"button\" className=\"button draft-btn\" onClick={handleSaveDraft}>\r\n              💾 Save as Draft\r\n            </button>\r\n\r\n            <button type=\"submit\" className=\"button submit-btn\">\r\n              📩 Submit Form\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"button\"\r\n              onClick={handleSendEmail}\r\n              disabled={!formData.supervisorEmail || !insertedId || isSendingEmail}\r\n            >\r\n              ✉️ {isSendingEmail ? 'Sending...' : 'Send Email'}\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"button print-btn\"\r\n              onClick={handlePrint}\r\n            >\r\n              🖨 Print\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PurchaseRequestForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}