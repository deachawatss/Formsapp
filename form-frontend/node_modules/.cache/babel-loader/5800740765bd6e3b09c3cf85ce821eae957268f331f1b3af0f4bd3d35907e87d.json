{"ast":null,"code":"import React,{useState}from'react';import{Box,Container,TextField,Button,Typography,Paper,Alert,Link,CircularProgress}from'@mui/material';import{Link as RouterLink}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{const[email,setEmail]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(!email){setError('กรุณากรอกอีเมล');return;}const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(email)){setError('กรุณากรอกอีเมลให้ถูกต้อง');return;}setLoading(true);try{await axios.post('http://localhost:3001/api/reset-password-request',{email});setSuccess('ส่งลิงก์สำหรับรีเซ็ตรหัสผ่านไปยังอีเมลของคุณแล้ว');setEmail('');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'เกิดข้อผิดพลาดในการส่งอีเมล');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsx(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{padding:4,width:'100%'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",align:\"center\",gutterBottom:true,children:\"\\u0E25\\u0E37\\u0E21\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:success}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:email,onChange:e=>setEmail(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'ส่งลิงก์รีเซ็ตรหัสผ่าน'}),/*#__PURE__*/_jsx(Box,{sx:{mt:2,textAlign:'center'},children:/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/login\",variant:\"body2\",sx:{textDecoration:'none'},children:\"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"})})]})]})})});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","Box","Container","TextField","Button","Typography","Paper","Alert","Link","CircularProgress","RouterLink","axios","jsx","_jsx","jsxs","_jsxs","ForgotPassword","email","setEmail","error","setError","success","setSuccess","loading","setLoading","handleSubmit","e","preventDefault","emailRegex","test","post","err","_err$response","_err$response$data","response","data","component","maxWidth","children","sx","marginTop","display","flexDirection","alignItems","elevation","padding","width","variant","align","gutterBottom","severity","mb","onSubmit","noValidate","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","disabled","type","mt","size","textAlign","to","textDecoration"],"sources":["C:/MyProjects/Orgforms/form-frontend/src/pages/forgot-password.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Container,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Paper,\r\n  Alert,\r\n  Link,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst ForgotPassword = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    if (!email) {\r\n      setError('กรุณากรอกอีเมล');\r\n      return;\r\n    }\r\n\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      setError('กรุณากรอกอีเมลให้ถูกต้อง');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await axios.post('http://localhost:3001/api/reset-password-request', { email });\r\n      setSuccess('ส่งลิงก์สำหรับรีเซ็ตรหัสผ่านไปยังอีเมลของคุณแล้ว');\r\n      setEmail('');\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'เกิดข้อผิดพลาดในการส่งอีเมล');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Box\r\n        sx={{\r\n          marginTop: 8,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Paper elevation={3} sx={{ padding: 4, width: '100%' }}>\r\n          <Typography component=\"h1\" variant=\"h5\" align=\"center\" gutterBottom>\r\n            ลืมรหัสผ่าน\r\n          </Typography>\r\n\r\n          {error && (\r\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n\r\n          {success && (\r\n            <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n              {success}\r\n            </Alert>\r\n          )}\r\n\r\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"email\"\r\n              label=\"อีเมล\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              disabled={loading}\r\n            />\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n              disabled={loading}\r\n            >\r\n              {loading ? <CircularProgress size={24} /> : 'ส่งลิงก์รีเซ็ตรหัสผ่าน'}\r\n            </Button>\r\n\r\n            <Box sx={{ mt: 2, textAlign: 'center' }}>\r\n              <Link\r\n                component={RouterLink}\r\n                to=\"/login\"\r\n                variant=\"body2\"\r\n                sx={{ textDecoration: 'none' }}\r\n              >\r\n                กลับไปหน้าเข้าสู่ระบบ\r\n              </Link>\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}